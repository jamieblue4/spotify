{"ast":null,"code":"import _slicedToArray from\"/Users/jamie/Desktop/spotify/web-music-player/spotify-clone-revision/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./App.css';import Login from'./Login';import{getTokenFromUrl}from'./spotify';import SpotifyWebApi from'spotify-web-api-js';import Player from'./Player';import{useDataLayerValue}from'./DataLayer';import{jsx as _jsx}from\"react/jsx-runtime\";var spotify=new SpotifyWebApi();function App(){var _useDataLayerValue=useDataLayerValue(),_useDataLayerValue2=_slicedToArray(_useDataLayerValue,2),_useDataLayerValue2$=_useDataLayerValue2[0],user=_useDataLayerValue2$.user,token=_useDataLayerValue2$.token,dispatch=_useDataLayerValue2[1];useEffect(function(){var hash=getTokenFromUrl();window.location.hash=\"\";var _token=hash.access_token;if(_token){dispatch({type:\"SET_TOKEN\",token:_token});spotify.setAccessToken(_token);spotify.getMe().then(function(user){dispatch({type:'SET_USER',user:user});});spotify.getUserPlaylists().then(function(playlists){dispatch({type:\"SET_PLAYLISTS\",playlists:playlists});});spotify.getPlaylist('37i9dQZEVXcHPjWDU60SuW').then(function(response){return dispatch({type:\"SET_DISCOVER_WEEKLY\",discover_weekly:response});});}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:token?/*#__PURE__*/_jsx(Player,{spotify:spotify}):/*#__PURE__*/_jsx(Login,{})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Login","getTokenFromUrl","SpotifyWebApi","Player","useDataLayerValue","spotify","App","user","token","dispatch","hash","window","location","_token","access_token","type","setAccessToken","getMe","then","getUserPlaylists","playlists","getPlaylist","response","discover_weekly"],"sources":["/Users/jamie/Desktop/spotify/web-music-player/spotify-clone-revision/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport Login from './Login';\nimport { getTokenFromUrl } from './spotify';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport Player from './Player';\nimport { useDataLayerValue } from './DataLayer';\n\nconst spotify = new SpotifyWebApi();\n\nfunction App() {\n  const [{user, token}, dispatch] = useDataLayerValue();\n\n  useEffect(() => {\n    const hash = getTokenFromUrl();\n    window.location.hash = \"\";\n\n    const _token = hash.access_token;\n\n    if (_token) {\n\n      dispatch({\n        type: \"SET_TOKEN\",\n        token: _token,\n      });\n\n      spotify.setAccessToken(_token);\n\n      spotify.getMe().then(user => {\n        dispatch({\n          type: 'SET_USER',\n          user: user,\n        });\n      });\n\n      spotify.getUserPlaylists().then((playlists) => {\n        dispatch({\n          type: \"SET_PLAYLISTS\",\n          playlists: playlists,\n        });\n      });\n\n      spotify.getPlaylist('37i9dQZEVXcHPjWDU60SuW').then(response => \n        dispatch({\n          type: \"SET_DISCOVER_WEEKLY\",\n          discover_weekly: response,\n        })\n      );\n    }\n  }, []);\n\n  return (\n    <div className=\"app\">\n      {token ? <Player spotify={spotify} /> : (<Login />)}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"0JAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,WAAW,CAClB,MAAOC,MAAK,KAAM,SAAS,CAC3B,OAASC,eAAe,KAAQ,WAAW,CAC3C,MAAOC,cAAa,KAAM,oBAAoB,CAC9C,MAAOC,OAAM,KAAM,UAAU,CAC7B,OAASC,iBAAiB,KAAQ,aAAa,CAAC,2CAEhD,GAAMC,QAAO,CAAG,GAAIH,cAAa,EAAE,CAEnC,QAASI,IAAG,EAAG,CACb,uBAAkCF,iBAAiB,EAAE,sGAA7CG,IAAI,sBAAJA,IAAI,CAAEC,KAAK,sBAALA,KAAK,CAAGC,QAAQ,wBAE9BX,SAAS,CAAC,UAAM,CACd,GAAMY,KAAI,CAAGT,eAAe,EAAE,CAC9BU,MAAM,CAACC,QAAQ,CAACF,IAAI,CAAG,EAAE,CAEzB,GAAMG,OAAM,CAAGH,IAAI,CAACI,YAAY,CAEhC,GAAID,MAAM,CAAE,CAEVJ,QAAQ,CAAC,CACPM,IAAI,CAAE,WAAW,CACjBP,KAAK,CAAEK,MACT,CAAC,CAAC,CAEFR,OAAO,CAACW,cAAc,CAACH,MAAM,CAAC,CAE9BR,OAAO,CAACY,KAAK,EAAE,CAACC,IAAI,CAAC,SAAAX,IAAI,CAAI,CAC3BE,QAAQ,CAAC,CACPM,IAAI,CAAE,UAAU,CAChBR,IAAI,CAAEA,IACR,CAAC,CAAC,CACJ,CAAC,CAAC,CAEFF,OAAO,CAACc,gBAAgB,EAAE,CAACD,IAAI,CAAC,SAACE,SAAS,CAAK,CAC7CX,QAAQ,CAAC,CACPM,IAAI,CAAE,eAAe,CACrBK,SAAS,CAAEA,SACb,CAAC,CAAC,CACJ,CAAC,CAAC,CAEFf,OAAO,CAACgB,WAAW,CAAC,wBAAwB,CAAC,CAACH,IAAI,CAAC,SAAAI,QAAQ,QACzDb,SAAQ,CAAC,CACPM,IAAI,CAAE,qBAAqB,CAC3BQ,eAAe,CAAED,QACnB,CAAC,CAAC,GACH,CACH,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,YAAK,SAAS,CAAC,KAAK,UACjBd,KAAK,cAAG,KAAC,MAAM,EAAC,OAAO,CAAEH,OAAQ,EAAG,cAAI,KAAC,KAAK,IAAI,EAC/C,CAEV,CAEA,cAAeC,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}